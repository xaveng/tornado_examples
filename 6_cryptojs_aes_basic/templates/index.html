<!DOCTYPE html>
<html>
<head>
	<title>
	 Tornado CryptoJS
	</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
    <script>
	$(document).ready(function(){
    	$("#msg_encrypt").click(function(){
    		var plaintext = $('#text').val();
		var secret = $('#secret').val();
		var encrypted = '' + CryptoJS.AES.encrypt(plaintext, secret);
		var data = {cipher:encrypted};
		data = JSON.stringify(data)
       	$.post("/", data, function(data,status){
       		document.location.href="/tag/"+data;	
       	});
    		});
	});
	</script>
</head>

<body>
	<div style="width:80%; margin-right:12.5%; float:right;">
	<textarea id="text" name="text" style="width: 100%; height: 200px;" value="" placeholder="This is the secret message"></textarea>
	<div style="margin-top:1em;">
	<p style="margin:0;">
    	<input type="password" id="secret" name="secret" value="" placeholder="Password (optional)" style="width:100%;">
	</p>
	</div>
		<div style="margin-top:1em;">
		<input id="msg_encrypt" class="button special" type="submit" value="Create">
	</div>
	</div>
</body>
</html>

